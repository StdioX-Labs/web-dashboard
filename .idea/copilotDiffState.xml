<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/../../../../../../src/app/api/tickets/lookup/route.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/../../../../../../src/app/api/tickets/lookup/route.ts" />
              <option name="updatedContent" value="import { NextRequest, NextResponse } from 'next/server'&#10;&#10;export async function POST(request: NextRequest) {&#10;  try {&#10;    const { groupCode, barcode } = await request.json()&#10;&#10;    // TODO: Implement actual lookup logic with your database&#10;    // This is a mock implementation&#10;    const mockResult = {&#10;      groupCode,&#10;      tickets: [&#10;        {&#10;          barcode: barcode || 'VT67PD',&#10;          eventName: 'Sample Event 2024',&#10;          status: 'valid'&#10;        }&#10;      ]&#10;    }&#10;&#10;    return NextResponse.json(mockResult)&#10;  } catch (error) {&#10;    return NextResponse.json(&#10;      { error: 'Failed to lookup ticket' },&#10;      { status: 500 }&#10;    )&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/../../../../../../src/app/api/tickets/validate/route.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/../../../../../../src/app/api/tickets/validate/route.ts" />
              <option name="updatedContent" value="import { NextRequest, NextResponse } from 'next/server'&#10;&#10;export async function POST(request: NextRequest) {&#10;  try {&#10;    const { barcode, groupCode } = await request.json()&#10;&#10;    // TODO: Implement actual validation logic with your database&#10;    // This is a mock implementation&#10;    const mockTicketInfo = {&#10;      status: 'Valid',&#10;      eventName: 'Sample Event 2024',&#10;      ticketCount: 1,&#10;      barcode,&#10;      groupCode,&#10;      validated: true&#10;    }&#10;&#10;    return NextResponse.json(mockTicketInfo)&#10;  } catch (error) {&#10;    return NextResponse.json(&#10;      { error: 'Failed to validate ticket' },&#10;      { status: 500 }&#10;    )&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/../../../../../../src/app/layout.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/../../../../../../src/app/layout.tsx" />
              <option name="updatedContent" value="// ...existing code...&#10;import { QrCode } from 'lucide-react'&#10;// ...existing code...&#10;          &lt;Link href=&quot;/events&quot; className={linkClass('/events')}&gt;&#10;            &lt;Calendar className=&quot;mr-3 h-5 w-5&quot; /&gt;&#10;            Events&#10;          &lt;/Link&gt;&#10;          &lt;Link href=&quot;/scan&quot; className={linkClass('/scan')}&gt;&#10;            &lt;QrCode className=&quot;mr-3 h-5 w-5&quot; /&gt;&#10;            Scan Events&#10;          &lt;/Link&gt;&#10;          &lt;Link href=&quot;/tickets&quot; className={linkClass('/tickets')}&gt;&#10;// ...existing code...&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/../../../../../../src/app/scan/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/../../../../../../src/app/scan/page.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useState } from 'react'&#10;import { Camera, KeyRound, CreditCard } from 'lucide-react'&#10;import QRScanner from '@/components/QRScanner'&#10;import ManualEntry from '@/components/ManualEntry'&#10;import MpesaPayment from '@/components/MpesaPayment'&#10;&#10;export default function ScanPage() {&#10;  const [activeTab, setActiveTab] = useState&lt;'scan' | 'manual' | 'payment'&gt;('scan')&#10;  const [scannedBarcode, setScannedBarcode] = useState&lt;string&gt;('')&#10;  const [groupCode, setGroupCode] = useState&lt;string&gt;('')&#10;&#10;  const handleScanSuccess = (barcode: string) =&gt; {&#10;    setScannedBarcode(barcode)&#10;  }&#10;&#10;  const handleManualSubmit = (code: string) =&gt; {&#10;    setGroupCode(code)&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;p-6&quot;&gt;&#10;      &lt;h1 className=&quot;text-3xl font-bold mb-6&quot;&gt;Scan Events&lt;/h1&gt;&#10;&#10;      {/* Tab Navigation */}&#10;      &lt;div className=&quot;flex gap-2 mb-6 border-b&quot;&gt;&#10;        &lt;button&#10;          onClick={() =&gt; setActiveTab('scan')}&#10;          className={`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${&#10;            activeTab === 'scan'&#10;              ? 'border-blue-500 text-blue-600'&#10;              : 'border-transparent text-gray-600 hover:text-gray-900'&#10;          }`}&#10;        &gt;&#10;          &lt;Camera className=&quot;h-5 w-5&quot; /&gt;&#10;          QR Scanner&#10;        &lt;/button&gt;&#10;        &lt;button&#10;          onClick={() =&gt; setActiveTab('manual')}&#10;          className={`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${&#10;            activeTab === 'manual'&#10;              ? 'border-blue-500 text-blue-600'&#10;              : 'border-transparent text-gray-600 hover:text-gray-900'&#10;          }`}&#10;        &gt;&#10;          &lt;KeyRound className=&quot;h-5 w-5&quot; /&gt;&#10;          Manual Entry&#10;        &lt;/button&gt;&#10;        &lt;button&#10;          onClick={() =&gt; setActiveTab('payment')}&#10;          className={`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${&#10;            activeTab === 'payment'&#10;              ? 'border-blue-500 text-blue-600'&#10;              : 'border-transparent text-gray-600 hover:text-gray-900'&#10;          }`}&#10;        &gt;&#10;          &lt;CreditCard className=&quot;h-5 w-5&quot; /&gt;&#10;          M-Pesa Payment&#10;        &lt;/button&gt;&#10;      &lt;/div&gt;&#10;&#10;      {/* Tab Content */}&#10;      &lt;div className=&quot;mt-6&quot;&gt;&#10;        {activeTab === 'scan' &amp;&amp; (&#10;          &lt;QRScanner onScanSuccess={handleScanSuccess} scannedBarcode={scannedBarcode} /&gt;&#10;        )}&#10;        {activeTab === 'manual' &amp;&amp; (&#10;          &lt;ManualEntry onSubmit={handleManualSubmit} groupCode={groupCode} /&gt;&#10;        )}&#10;        {activeTab === 'payment' &amp;&amp; &lt;MpesaPayment /&gt;}&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/../../../../../../src/components/ManualEntry.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/../../../../../../src/components/ManualEntry.tsx" />
              <option name="updatedContent" value="'use client'&#10;&#10;import { useState } from 'react'&#10;import { Search, Loader2 } from 'lucide-react'&#10;&#10;interface ManualEntryProps {&#10;  onSubmit: (code: string) =&gt; void&#10;  groupCode: string&#10;}&#10;&#10;export default function ManualEntry({ onSubmit, groupCode }: ManualEntryProps) {&#10;  const [code, setCode] = useState(groupCode)&#10;  const [barcode, setBarcode] = useState('')&#10;  const [loading, setLoading] = useState(false)&#10;  const [result, setResult] = useState&lt;any&gt;(null)&#10;&#10;  const handleSubmit = async (e: React.FormEvent) =&gt; {&#10;    e.preventDefault()&#10;    setLoading(true)&#10;&#10;    try {&#10;      const response = await fetch('/api/tickets/lookup', {&#10;        method: 'POST',&#10;        headers: { 'Content-Type': 'application/json' },&#10;        body: JSON.stringify({ groupCode: code, barcode })&#10;      })&#10;&#10;      const data = await response.json()&#10;      setResult(data)&#10;      onSubmit(code)&#10;    } catch (err) {&#10;      setResult({ error: 'Failed to lookup ticket' })&#10;    } finally {&#10;      setLoading(false)&#10;    }&#10;  }&#10;&#10;  return (&#10;    &lt;div className=&quot;max-w-2xl mx-auto&quot;&gt;&#10;      &lt;div className=&quot;bg-white rounded-lg shadow-md p-6&quot;&gt;&#10;        &lt;h2 className=&quot;text-2xl font-bold mb-4&quot;&gt;Manual Ticket Entry&lt;/h2&gt;&#10;&#10;        &lt;form onSubmit={handleSubmit} className=&quot;space-y-4&quot;&gt;&#10;          &lt;div&gt;&#10;            &lt;label className=&quot;block text-sm font-medium mb-2&quot;&gt;&#10;              Transaction Group Code *&#10;            &lt;/label&gt;&#10;            &lt;input&#10;              type=&quot;text&quot;&#10;              value={code}&#10;              onChange={(e) =&gt; setCode(e.target.value.toUpperCase())}&#10;              placeholder=&quot;TXN123456&quot;&#10;              required&#10;              className=&quot;w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none&quot;&#10;            /&gt;&#10;            &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;&#10;              Enter the transaction group code to lookup tickets&#10;            &lt;/p&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;div&gt;&#10;            &lt;label className=&quot;block text-sm font-medium mb-2&quot;&gt;&#10;              Barcode (Optional)&#10;            &lt;/label&gt;&#10;            &lt;input&#10;              type=&quot;text&quot;&#10;              value={barcode}&#10;              onChange={(e) =&gt; setBarcode(e.target.value.toUpperCase())}&#10;              placeholder=&quot;VT67PD&quot;&#10;              className=&quot;w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none&quot;&#10;            /&gt;&#10;            &lt;p className=&quot;text-sm text-gray-500 mt-1&quot;&gt;&#10;              Optionally enter a specific barcode to verify&#10;            &lt;/p&gt;&#10;          &lt;/div&gt;&#10;&#10;          &lt;button&#10;            type=&quot;submit&quot;&#10;            disabled={!code || loading}&#10;            className=&quot;w-full bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2&quot;&#10;          &gt;&#10;            {loading ? (&#10;              &lt;&gt;&#10;                &lt;Loader2 className=&quot;h-5 w-5 animate-spin&quot; /&gt;&#10;                Looking up...&#10;              &lt;/&gt;&#10;            ) : (&#10;              &lt;&gt;&#10;                &lt;Search className=&quot;h-5 w-5&quot; /&gt;&#10;                Lookup Ticket&#10;              &lt;/&gt;&#10;            )}&#10;          &lt;/button&gt;&#10;        &lt;/form&gt;&#10;&#10;        {result &amp;&amp; (&#10;          &lt;div className={`mt-6 p-4 rounded-lg ${result.error ? 'bg-red-50 border border-red-200' : 'bg-green-50 border border-green-200'}`}&gt;&#10;            {result.error ? (&#10;              &lt;p className=&quot;text-red-700&quot;&gt;{result.error}&lt;/p&gt;&#10;            ) : (&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;h3 className=&quot;font-bold text-lg&quot;&gt;Ticket Found&lt;/h3&gt;&#10;                &lt;p&gt;&lt;span className=&quot;font-semibold&quot;&gt;Group Code:&lt;/span&gt; {result.groupCode}&lt;/p&gt;&#10;                &lt;p&gt;&lt;span className=&quot;font-semibold&quot;&gt;Tickets:&lt;/span&gt; {result.tickets?.length || 0}&lt;/p&gt;&#10;                {result.tickets?.map((ticket: any, idx: number) =&gt; (&#10;                  &lt;div key={idx} className=&quot;pl-4 border-l-2 border-green-300&quot;&gt;&#10;                    &lt;p className=&quot;font-semibold&quot;&gt;{ticket.barcode}&lt;/p&gt;&#10;                    &lt;p className=&quot;text-sm&quot;&gt;{ticket.eventName}&lt;/p&gt;&#10;                  &lt;/div&gt;&#10;                ))}&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/div&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>